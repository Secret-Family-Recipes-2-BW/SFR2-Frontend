{"ast":null,"code":"var _jsxFileName = \"/home/me/lambda/updates/SFR2-Frontend/secret_family_recipes/src/components/Signup.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport * as yup from \"yup\";\nimport validationSchema from \"./validation/validationSchema\";\nimport { axiosWithAuth } from \"../utils/axiosWithAuth\";\nimport { useHistory, Link } from \"react-router-dom\";\nimport { setLoggedIn, setLoggedOut } from \"../actions/accountActions\";\nimport { connect } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst initialFormValues = {\n  username: \"\",\n  password: \"\"\n};\nconst initialFormErrors = {\n  username: \"\",\n  password: \"\"\n};\nconst initialUser = [];\nconst initialDisabled = true;\n\nfunction SignupForm(props) {\n  _s();\n\n  const [users, setUsers] = useState(initialUser);\n  const [formValues, setFormValues] = useState(initialFormValues);\n  const [errors, setErrors] = useState(initialFormErrors);\n  const [disabled, setDisabled] = useState(initialDisabled);\n  const history = useHistory();\n  const [loginExists, setLoginExists] = useState(false); // FORM FUNCTIONS\n\n  const onSubmit = evt => {\n    evt.preventDefault();\n    axiosWithAuth().post(\"/api/users/register\", formValues).then(res => {\n      props.setLoggedIn();\n      localStorage.setItem(\"token\", res.data.data.token);\n      history.push(\"/recipes\");\n    }).catch(error => {\n      setLoginExists(true);\n    });\n    const newUser = {\n      username: formValues.username.trim(),\n      password: formValues.password.trim()\n    };\n  }; // YUP VALIDATIONS\n\n\n  const inputChange = evt => {\n    const {\n      name,\n      value\n    } = evt.target;\n    yup.reach(validationSchema, name).validate(value).then(valid => {\n      setErrors({ ...errors,\n        [name]: \"\"\n      });\n    }).catch(err => {\n      setErrors({ ...errors,\n        [name]: err.errors[0]\n      });\n    });\n    setFormValues({ ...formValues,\n      [name]: value\n    });\n  };\n\n  useEffect(() => {\n    validationSchema.isValid(formValues).then(valid => {\n      setDisabled(!valid);\n    });\n  }, [formValues]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"formContainer\",\n      onSubmit: onSubmit,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formContent\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"signUpTitle\",\n            children: [\"Sign Up for \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"appName\",\n              children: \"Secret Family Recipe\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 11\n          }, this), loginExists === false ? null : /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"error\",\n            children: \"Username is already taken. Try Again!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error\",\n            children: errors.first_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error\",\n            children: errors.password\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"formInputs\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"inputLabels\",\n            children: [\"Username:\\xA0\", /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"username\",\n              type: \"text\",\n              placeholder: \"username\",\n              value: formValues.username,\n              onChange: inputChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"inputLabels\",\n            children: [\"Password:\\xA0\", /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"password\",\n              type: \"password\",\n              placeholder: \"******\",\n              value: formValues.password,\n              onChange: inputChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"formSubmitContainer\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"submitBtn\",\n            disabled: disabled,\n            children: \"Register\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(SignupForm, \"xutRSbT9wg4Gm4NRKWfqgGO/YBE=\", false, function () {\n  return [useHistory];\n});\n\n_c = SignupForm;\n\nconst mapStateToProps = state => {\n  return {\n    loggedIn: state.accountReducer.loggedIn\n  };\n};\n\nexport default connect(mapStateToProps, {\n  setLoggedIn,\n  setLoggedOut\n})(SignupForm);\n\nvar _c;\n\n$RefreshReg$(_c, \"SignupForm\");","map":{"version":3,"sources":["/home/me/lambda/updates/SFR2-Frontend/secret_family_recipes/src/components/Signup.js"],"names":["React","useState","useEffect","yup","validationSchema","axiosWithAuth","useHistory","Link","setLoggedIn","setLoggedOut","connect","initialFormValues","username","password","initialFormErrors","initialUser","initialDisabled","SignupForm","props","users","setUsers","formValues","setFormValues","errors","setErrors","disabled","setDisabled","history","loginExists","setLoginExists","onSubmit","evt","preventDefault","post","then","res","localStorage","setItem","data","token","push","catch","error","newUser","trim","inputChange","name","value","target","reach","validate","valid","err","isValid","first_name","mapStateToProps","state","loggedIn","accountReducer"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport * as yup from \"yup\";\nimport validationSchema from \"./validation/validationSchema\";\nimport { axiosWithAuth } from \"../utils/axiosWithAuth\";\nimport { useHistory, Link } from \"react-router-dom\";\nimport { setLoggedIn, setLoggedOut } from \"../actions/accountActions\";\nimport { connect } from \"react-redux\";\n\n\nconst initialFormValues = {\n  username: \"\",\n  password: \"\",\n};\n\nconst initialFormErrors = {\n  username: \"\",\n  password: \"\",\n};\n\nconst initialUser = [];\nconst initialDisabled = true;\n\n  function SignupForm(props) {\n  const [users, setUsers] = useState(initialUser);\n  const [formValues, setFormValues] = useState(initialFormValues);\n  const [errors, setErrors] = useState(initialFormErrors);\n  const [disabled, setDisabled] = useState(initialDisabled);\n  const history = useHistory();\n  const [loginExists, setLoginExists] = useState(false);\n\n\n  // FORM FUNCTIONS\n  const onSubmit = (evt) => {\n    evt.preventDefault();\n    axiosWithAuth()\n      .post(\"/api/users/register\", formValues)\n      .then((res) => {\n        props.setLoggedIn()\n        localStorage.setItem(\"token\", res.data.data.token);\n        history.push(\"/recipes\");\n      })\n      .catch(error=>{\n        setLoginExists(true);\n      })\n    const newUser = {\n      username: formValues.username.trim(),\n      password: formValues.password.trim(),\n    };\n  };\n\n  // YUP VALIDATIONS\n  const inputChange = (evt) => {\n    const { name, value } = evt.target;\n\n    yup\n      .reach(validationSchema, name)\n      .validate(value)\n      .then((valid) => {\n        setErrors({\n          ...errors,\n          [name]: \"\",\n        });\n      })\n      .catch((err) => {\n        setErrors({\n          ...errors,\n          [name]: err.errors[0],\n        });\n      });\n\n    setFormValues({\n      ...formValues,\n      [name]: value,\n    });\n  };\n\n  useEffect(() => {\n    validationSchema.isValid(formValues).then((valid) => {\n      setDisabled(!valid);\n    });\n  }, [formValues]);\n\n  return (\n    <>\n      <form className=\"formContainer\" onSubmit={onSubmit}>\n        <div className='formContent'>\n\n        <div>\n          <h2 className=\"signUpTitle\">\n            Sign Up for <br />\n            <span className=\"appName\">Secret Family Recipe</span>\n          </h2>\n          {loginExists === false ? null : (\n          <p className=\"error\">Username is already taken. Try Again!</p>\n        )}\n        </div>\n        <div className=\"error container\">\n          <div className=\"error\">{errors.first_name}</div>\n          <div className=\"error\">{errors.password}</div>\n        </div>\n\n        <div className=\"formInputs\">\n          <label className=\"inputLabels\">\n            Username:&nbsp;\n            <input\n              name=\"username\"\n              type=\"text\"\n              placeholder=\"username\"\n              value={formValues.username}\n              onChange={inputChange}\n            />\n          </label>\n\n          <label className=\"inputLabels\">\n            Password:&nbsp;\n            <input\n              name=\"password\"\n              type=\"password\"\n              placeholder=\"******\"\n              value={formValues.password}\n              onChange={inputChange}\n            />\n          </label>\n        </div>\n        <div className=\"formSubmitContainer\">\n          <button id=\"submitBtn\" disabled={disabled}>\n            Register\n          </button>\n        </div>\n        </div>\n      </form>\n    </>\n  );\n}\n\n\n\nconst mapStateToProps = (state) => {\n  return {\n    loggedIn: state.accountReducer.loggedIn,\n  };\n};\nexport default connect(mapStateToProps, { setLoggedIn, setLoggedOut })(SignupForm);"]},"metadata":{},"sourceType":"module"}