{"ast":null,"code":"var _jsxFileName = \"/home/me/lambda/updates/SFR2-Frontend/secret_family_recipes/src/components/Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport * as yup from \"yup\";\nimport validationSchema from \"./validation/validationSchema\";\nimport { axiosWithAuth } from \"../utils/axiosWithAuth\";\nimport { useHistory, Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { setLoggedIn, setLoggedOut, setUser } from \"../actions/accountActions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialFormValues = {\n  username: \"\",\n  password: \"\"\n};\nconst initialFormErrors = {\n  username: \"\",\n  password: \"\"\n};\nconst initialDisabled = true;\n\nfunction LoginForm(props) {\n  _s();\n\n  const [login, setLogin] = useState(initialFormValues);\n  const [errors, setErrors] = useState(initialFormErrors);\n  const [disabled, setDisabled] = useState(initialDisabled);\n  const [doesntExist, setDoesntExist] = useState(false);\n  const history = useHistory();\n  useEffect(() => {\n    setLoggedIn();\n    setLoggedOut();\n  }, []); // FORM FUNCTIONS\n\n  const onLoginSubmit = evt => {\n    evt.preventDefault();\n    axiosWithAuth().post(\"/api/users/login \", login).then(res => {\n      props.setLoggedIn();\n      localStorage.setItem(\"token\", res.data.data.token);\n      props.setUser(res.data.data.user);\n      history.push(\"/recipes\");\n    }).catch(err => {\n      console.log(\"error happend with post request\", err);\n      setDoesntExist(true);\n    });\n    const userLogin = {\n      username: login.username.trim(),\n      password: login.password.trim()\n    };\n  }; // YUP VALIDATIONS\n\n\n  const inputChange = evt => {\n    const {\n      name,\n      value\n    } = evt.target;\n    yup.reach(validationSchema, name).validate(value).then(valid => {\n      setErrors({ ...errors,\n        [name]: \"\"\n      });\n    }).catch(err => {\n      setErrors({ ...errors,\n        [name]: err.errors[0]\n      });\n    });\n    setLogin({ ...login,\n      [name]: value\n    });\n  };\n\n  useEffect(() => {\n    validationSchema.isValid(login).then(valid => {\n      setDisabled(!valid);\n    });\n  }, [login]);\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"formContainerLogin\",\n    onSubmit: onLoginSubmit,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"formContent\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"signUpTitle\",\n          children: [\"Login for\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"appName\",\n            children: \"Secret Family Recipe\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 9\n        }, this), doesntExist === false ? null : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"error\",\n          children: \"Username doesnt exist!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error\",\n          children: errors.first_name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error\",\n          children: errors.password\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formInputs\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"inputLabels\",\n          children: [\"Username:\\xA0\", /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"username\",\n            type: \"text\",\n            placeholder: \"username\",\n            value: login.username,\n            onChange: inputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"inputLabels\",\n          children: [\"Password:\\xA0\", /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"password\",\n            type: \"password\",\n            placeholder: \"******\",\n            value: login.password,\n            onChange: inputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formSubmitContainer\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"submitBtn\",\n          disabled: disabled,\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n}\n\n_s(LoginForm, \"UR6+lrFYqG4FHQDne9zZsp2AyRQ=\", false, function () {\n  return [useHistory];\n});\n\n_c = LoginForm;\n\nconst mapStateToProps = state => {\n  return {\n    loggedIn: state.accountReducer.loggedIn\n  };\n};\n\nexport default connect(mapStateToProps, {\n  setLoggedIn,\n  setLoggedOut,\n  setUser\n})(LoginForm);\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"sources":["/home/me/lambda/updates/SFR2-Frontend/secret_family_recipes/src/components/Login.js"],"names":["React","useState","useEffect","yup","validationSchema","axiosWithAuth","useHistory","Link","connect","setLoggedIn","setLoggedOut","setUser","initialFormValues","username","password","initialFormErrors","initialDisabled","LoginForm","props","login","setLogin","errors","setErrors","disabled","setDisabled","doesntExist","setDoesntExist","history","onLoginSubmit","evt","preventDefault","post","then","res","localStorage","setItem","data","token","user","push","catch","err","console","log","userLogin","trim","inputChange","name","value","target","reach","validate","valid","isValid","first_name","mapStateToProps","state","loggedIn","accountReducer"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport * as yup from \"yup\";\nimport validationSchema from \"./validation/validationSchema\";\nimport { axiosWithAuth } from \"../utils/axiosWithAuth\";\nimport { useHistory, Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { setLoggedIn, setLoggedOut, setUser } from \"../actions/accountActions\";\n\n\nconst initialFormValues = {\n  username: \"\",\n  password: \"\",\n};\n\nconst initialFormErrors = {\n  username: \"\",\n  password: \"\",\n};\n\nconst initialDisabled = true;\n\nfunction LoginForm(props) {\n  const [login, setLogin] = useState(initialFormValues);\n  const [errors, setErrors] = useState(initialFormErrors);\n  const [disabled, setDisabled] = useState(initialDisabled);\n  const [doesntExist, setDoesntExist] = useState(false);\n  const history = useHistory();\n\n\n\nuseEffect(()=>{\n  setLoggedIn()\n  setLoggedOut()\n},[])\n\n\n  // FORM FUNCTIONS\n  const onLoginSubmit = (evt) => {\n    evt.preventDefault();\n    axiosWithAuth()\n      .post(\"/api/users/login \", login)\n      .then((res) => {\n        props.setLoggedIn();\n        localStorage.setItem(\"token\", res.data.data.token);\n        props.setUser(res.data.data.user)\n        history.push(\"/recipes\");\n      })\n      .catch((err) => {\n        console.log(\"error happend with post request\", err);\n\n        setDoesntExist(true);\n      });\n\n    const userLogin = {\n      username: login.username.trim(),\n      password: login.password.trim(),\n    };\n  };\n\n  // YUP VALIDATIONS\n  const inputChange = (evt) => {\n    const { name, value } = evt.target;\n    yup\n      .reach(validationSchema, name)\n      .validate(value)\n      .then((valid) => {\n        setErrors({\n          ...errors,\n          [name]: \"\",\n        });\n      })\n      .catch((err) => {\n        setErrors({\n          ...errors,\n          [name]: err.errors[0],\n        });\n      });\n\n    setLogin({\n      ...login,\n      [name]: value,\n    });\n  };\n \n  useEffect(() => {\n    validationSchema.isValid(login).then((valid) => {\n      setDisabled(!valid);\n    });\n  }, [login]);\n\n  return (\n    <form className=\"formContainerLogin\" onSubmit={onLoginSubmit}>\n      \n      <div className='formContent'>\n      <div>\n        <h2 className=\"signUpTitle\">\n          Login for\n          <br />\n          <span className=\"appName\">Secret Family Recipe</span>\n        </h2>\n        {doesntExist === false ? null : (\n          <p className=\"error\">Username doesnt exist!</p>\n        )}\n      </div>\n      <div className=\"error container\">\n        <div className=\"error\">{errors.first_name}</div>\n        <div className=\"error\">{errors.password}</div>\n      </div>\n\n      <div className=\"formInputs\">\n        <label className=\"inputLabels\">\n          Username:&nbsp;\n          <input\n            name=\"username\"\n            type=\"text\"\n            placeholder=\"username\"\n            value={login.username}\n            onChange={inputChange}\n          />\n        </label>\n\n        <label className=\"inputLabels\">\n          Password:&nbsp;\n          <input\n            name=\"password\"\n            type=\"password\"\n            placeholder=\"******\"\n            value={login.password}\n            onChange={inputChange}\n          />\n        </label>\n      </div>\n      <div className=\"formSubmitContainer\">\n        <button id=\"submitBtn\" disabled={disabled}>\n          Login\n        </button>\n      </div>\n      </div>\n    </form>\n  );\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    loggedIn: state.accountReducer.loggedIn,\n  };\n};\nexport default connect(mapStateToProps, { setLoggedIn, setLoggedOut, setUser })(\n  LoginForm\n);\n"]},"metadata":{},"sourceType":"module"}